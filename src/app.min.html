data:text/html,<html><head><title>Note</title><meta charset="UTF-8"><meta name="description" content="Web app for taking notes with autosave feature"><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0"><style>.container{display:flex;flex-direction:column;width:100%;min-height:100vh;background-color:rgb(248, 248, 248);color:rgb(51, 51, 51);font-family:Arial,sans-serif;margin:0;padding:20px 20px 0;box-sizing:border-box;}.switch{position:relative;display:inline-block;width:60px;height:20px;}.switch .slider{position:absolute;cursor:pointer;width:55px;top:0;left:0;right:0;bottom:0;background-color:rgb(204, 204, 204);transition:0.4s;border-radius:12px;}.switch .slider:before{content:"";position:absolute;width:36px;height:20px;background-color:white;transition:0.4s;border-radius:12px;}.switch input[type="checkbox"]:checked + .slider:before{transform:translateX(20px);}.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}.header input[type="text"]{width:100%;margin-right:15px;box-sizing:border-box;}.content{flex:1;}.content textarea{width:100%;height:calc(100vh - 100px);resize:none;}.header input[type="text"],.content textarea{padding:10px;font-size:16px;border:1px solid rgb(204, 204, 204);border-radius:4px;outline:none;}.header input[type="text"]:focus,.content textarea:focus{border-color:rgb(153, 153, 153);}.content textarea::-webkit-scrollbar{width:14px;}.content textarea::-webkit-scrollbar-track{background:transparent;border:none;}.content textarea::-webkit-scrollbar-thumb{background-color:rgba(31, 31, 31, 0.16);background-clip:padding-box;border:3px solid transparent;border-radius:8px;box-shadow:none;height:64px;cursor:default;}.content textarea::-webkit-scrollbar-thumb:hover{background-color:rgba(31, 31, 31, 0.24);}.footer{display:flex;justify-content:space-between;align-items:center;font-size:12px;height:20px;color:rgb(136, 136, 136);}.footer-left{flex:1;text-align:left;}.footer-right{flex:1;text-align:right;}.container.dark{background-color:rgb(51, 51, 51);}.container.dark input[type="text"],.container.dark textarea{background-color:rgb(68, 68, 68);border-color:rgb(85, 85, 85);color:rgb(238, 238, 238);}.container.dark input[type="text"]:focus,.container.dark textarea:focus{border-color:rgb(119, 119, 119);}.container.dark textarea::-webkit-scrollbar-thumb{background-color:rgba(227, 227, 227, 0.16);}.container.dark textarea::-webkit-scrollbar-thumb:hover{background-color:rgba(227, 227, 227, 0.24);}.container.dark .switch .slider{background-color:rgb(85, 85, 85);}.container.dark .switch input[type="checkbox"]:checked + .slider{background-color:rgb(0, 123, 255);}.container,textarea,input{transition:0.2s;}body{margin:0;}@-moz-document url-prefix(){.container{margin-top:-3px;}}</style></head><body><div class="container"><div class="header"> <input type="text" id="note-title" placeholder="Note Title" tabindex="1"><label class="switch" title="Light / Dark Theme Switcher"> <input type="checkbox" id="toggle"><span class="slider"></span></label></div><div class="content"><textarea id="note-content" placeholder="Some text..." tabindex="2"></textarea></div><footer class="footer"><span class="footer-left">Note ID: <span id="note-id"></span></span><span class="footer-right">Updated at: <span id="time-updated-at"></span></span></footer></div><script>const c=true;const o=",";const t="|";const e=document.body;const n=document.querySelector(".container");const r=document.getElementById("toggle");const a=document.getElementById("note-title");const u=document.getElementById("note-content");const i=document.getElementById("note-id");const s=document.getElementById("time-updated-at");const d=Object.freeze({t:"theme",o:"zipped",i:"id",u:"updated",l:"title",CONTENT:"content"});const l={p:t,h(){return Date.now().toString()},m(){if(this.metadata.g){i.innerHTML=this.metadata.g}},D(){if(this.metadata.I){s.innerHTML=new Date(this.metadata.I).toLocaleString("en-CA",{hour12:false})}},U(){this.metadata.A();this.m();this.D()},C(t){return`${this.p}${t}${this.p}`},T(t){return String(t).replaceAll(this.p,"")},N(){return Boolean(window.location.hash.substring(1))},R(){const t=a.value||null;const e=u.value||null;const n=this.storage.S||null;const o=this.storage.B||null;if(n!==t||o!==e){return true}return false},metadata:{g:null,I:null,get O(){return l.C(this.j)},get j(){if(Object.is(this.g,null)){this.g=l.h()}return this.g},set j(t){this.g=l.T(t)},get _(){return this.I},set _(t){this.I=Number(t)},A(){this.j=I(d.i);this._=I(d.u)}},storage:{k:null,P:null,get S(){return this.k},get B(){return this.P},$(){this.k=a.value;this.P=u.value}}};async function f(t){const e=new Blob([t],{type:"text/plain"}).stream();const n=e.pipeThrough(new CompressionStream("gzip"));const o=await new Response(n);const i=await o.blob();const s=await i.arrayBuffer();const c=btoa(String.fromCharCode(...new Uint8Array(s)));return c}async function p(t){const e=atob(t);const n=new Uint8Array(e.length);for(let t=0;t<e.length;t++){n[t]=e.charCodeAt(t)}const o=new Blob([n],{type:"application/octet-stream"}).stream();const i=o.pipeThrough(new DecompressionStream("gzip"));const s=await new Response(i);const c=await s.blob();const r=await c.text();return r}async function h(){let t="";let e="";let n=r.checked?1:0;let o=0;let i=Date.now();if(!l.R()){if(l.N()){if(n!==Number(I(d.t))){i=I(d.u)}else{return}}else{return}}if(c){try{t=await f(encodeURIComponent(a.value));e=await f(encodeURIComponent(u.value));o=1}catch(s){console.warn("Data compression not supported. Storing data unzipped. ",s)}}if(!o){t=btoa(encodeURIComponent(a.value));e=btoa(encodeURIComponent(u.value))}b({[d.l]:t,[d.CONTENT]:e,[d.t]:n,[d.o]:o,[d.i]:l.metadata.O,[d.u]:i});l.storage.$();l.U()}async function m(){const t=w();const e=Number(t[d.t]);const n=Number(t[d.o]);let o="";let i="";if(n){o=await p(t[d.l]);i=await p(t[d.CONTENT])}else{o=atob(t[d.l]);i=atob(t[d.CONTENT])}r.checked=Boolean(e);a.value=decodeURIComponent(o);u.value=decodeURIComponent(i);if(r.checked){A()}l.storage.$();l.U()}function w(){const t=window.location.hash.substring(1);if(!t){return null}return g(t.split(o))}function b(t){const e=String.fromCharCode(35);const n=g(t).join(o);try{history.replaceState(undefined,"",e+n)}catch(_){window.location.hash=n}}function g(n){const o=[d.t,d.o,d.i,d.u,d.l,d.CONTENT];let i=null;if(Array.isArray(n)){if(n.length===o.length){i={};o.forEach((t,e)=>{i[t]=n[e]})}}else if(n instanceof Object){if(Object.keys(n).length===o.length){i=[];Object.entries(n).forEach(([t,e])=>{const n=o.indexOf(t);i[n]=e})}}return i}let D=null;function y(e,n){return function(...t){clearTimeout(D);D=setTimeout(()=>{e.apply(this,t)},n)}}function I(t){const e=w();return e?.[t]}function U(){document.title=a.value||"Note"}function A(){["dark"].map(t=>n.classList.toggle(t,r.checked))}function C(){const t=matchMedia("(prefers-color-scheme: dark)").matches;r.checked=t;A()}function T(t,e,o){t=Array.isArray(t)?t:[t];o=Array.isArray(o)?o:[o];t.forEach(n=>{e.split(" ").forEach(e=>{o.forEach(t=>{n.addEventListener(e,t)})})})}(()=>{if(l.N()){m().then(U)}else{C()}const t=y(h,5e3);T([a,u],"input keydown",t);T([a,u],"mouseout",h);T(r,"change",[t,A]);T(a,"input",U)})();</script></body></html>
